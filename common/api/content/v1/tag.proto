syntax = "proto3";

package common.api.content.v1;

import "google/api/annotations.proto";
import "validate/validate.proto";
import "google/protobuf/timestamp.proto";
import "common/v1/common.proto";

option go_package = "common/api/content/v1;v1";

// 标签服务
service ContentTagService {

  rpc Add (AddTagRequest) returns (AddTagReply) {
    option (google.api.http) = {
      post: "/v1/tag/add"
      body: "*"
    };
  }

  rpc Update (UpdateTagRequest) returns (UpdateTagReply) {
    option (google.api.http) = {
      post: "/v1/tag/update"
      body: "*"
    };
  }

  rpc Get (GetTagRequest) returns (GetTagReply) {
    option (google.api.http) = {
      post: "/v1/tag/get"
      body: "*"
    };
  }
}


message Tag {
  // 标签ID
  int64 id = 1;
  // 创建用户ID
  int64 user_id = 2;
  // 标签名称
  string name = 3;
  // 描述
  string description = 4;
  // 所属领域ID
  int64 domain_id = 5;
  // 标签状态：0-正常，1-禁用
  int32 status = 6;
  // 文章数
  int32 article_count = 7;
  // 创建时间
  google.protobuf.Timestamp created_at = 8;
  // 更新时间
  google.protobuf.Timestamp updated_at = 9;
}

message AddTagRequest {
  // 标签名称
  repeated string names = 1;
}
message AddTagReply {}

message UpdateTagRequest {
  // 标签ID
  int64 id = 1;
  // 领域ID
  int64 domain_id = 2;
  // 状态：0-正常，1-禁用
  int32 status = 3;
  // 标签名称
  string name = 4;
  // 标签描述
  string description = 5;
}
message UpdateTagReply {}

message GetTagRequest {
  // 分页
  common.v1.PageRequest page = 1;
  // 标签ID
  int64 id = 2;
  // 领域ID
  int64 domain_id = 3;
}
message GetTagReply {
  // 分页
  common.v1.PageReply page = 1;
  // 标签列表
  repeated Tag tags = 2;
}